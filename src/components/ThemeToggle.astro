---
// Componente para el toggle de tema (Dark/Light Mode)
---

<div class="theme-toggle" id="theme-toggle" aria-label="Cambiar tema oscuro/claro">
  <div class="theme-toggle-slider">
    <svg class="theme-toggle-icon theme-toggle-moon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
      <path d="M12 2a9.93 9.93 0 0 0 0 20 9.93 9.93 0 0 0 0-20zm0 18a8 8 0 0 1 0-16 7.86 7.86 0 0 1 3.66.89A7 7 0 0 0 12 20z"/>
    </svg>

    <svg class="theme-toggle-icon theme-toggle-sun" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
      <circle cx="12" cy="12" r="5"/>
      <line x1="12" y1="1" x2="12" y2="3"/>
      <line x1="12" y1="21" x2="12" y2="23"/>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
      <line x1="1" y1="12" x2="3" y2="12"/>
      <line x1="21" y1="12" x2="23" y2="12"/>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
    </svg>
  </div>
</div>

<style>
/* 1. Contenedor principal del Toggle */
.theme-toggle {
  width: 70px;
  height: 36px;
  /* Nuevo color de fondo: Un morado oscuro que pega con tu tema */
  background: var(--toggle-bg, #36294f);
  border-radius: 50px;
  display: flex;
  align-items: center;
  padding: 4px;
  cursor: pointer;
  transition: background 0.3s ease;
  border: 2px solid #5d458c; 
  position: relative; 
  z-index: 10;
  margin-left: 10px; 
}

/* 2. El botón que se desliza */
.theme-toggle-slider {
  width: 28px;
  height: 28px;
  /* Color del círculo deslizante: Morado vibrante */
  background: #a988ff; 
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.3s ease, background 0.3s ease;
  position: relative;
}

/* 3. Íconos de Sol y Luna */
.theme-toggle-icon {
  width: 16px;
  height: 16px;
  /* Color de los íconos */
  color: #fff; 
  position: absolute;
  /* Cambiamos la transición para la opacidad */
  transition: opacity 0.3s ease;
}

/* Ajuste fino de la Luna para un mejor centrado */
.theme-toggle-moon {
  transform: translate(0.5px, 0.5px);
}

/* 4. Lógica de visibilidad de íconos */
html[data-theme='light'] .theme-toggle-moon,
html[data-theme='dark'] .theme-toggle-sun {
  opacity: 0;
}

html[data-theme='light'] .theme-toggle-sun,
html[data-theme='dark'] .theme-toggle-moon {
  opacity: 1;
}


/* 5. Movimiento del botón (Slider) */
/* Posición inicial: Modo Claro (izquierda) */
html[data-theme='light'] .theme-toggle-slider {
  transform: translateX(0);
}
/* Posición final: Modo Oscuro (derecha) */
html[data-theme='dark'] .theme-toggle-slider {
  transform: translateX(34px);
}
</style>

<script>
function initThemeToggle() {
  const themeToggle = document.getElementById('theme-toggle');
  const html = document.documentElement;

  // Cargar tema guardado o predeterminado
  // Se recomienda iniciar en 'dark' para que pegue con tu diseño actual
  const savedTheme = localStorage.getItem('theme') || 'dark';
  html.setAttribute('data-theme', savedTheme);

  // Cambiar tema al hacer clic
  function toggleTheme() {
    const currentTheme = html.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    html.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
  }

  if (themeToggle) {
    themeToggle.addEventListener('click', toggleTheme);
  }
}

// Inicialización del script
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initThemeToggle);
} else {
  initThemeToggle();
}
</script>